From 0a3a5dbd1b9b1cf8d84a88b433823143862ccc04 Mon Sep 17 00:00:00 2001
From: Wei Jia <wjia@google.com>
Date: Tue, 30 Aug 2016 13:49:06 -0700
Subject: [PATCH 124/182] MediaPlayerService: allow next player to be NULL

Bug: 31155917
Bug: 30204103
Change-Id: I9a2a59ddb900fc942e7c19b31b53a110d790474c
---
 media/libmediaplayerservice/MediaPlayerService.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/media/libmediaplayerservice/MediaPlayerService.cpp b/media/libmediaplayerservice/MediaPlayerService.cpp
index 4866e19..c3dbc1b 100644
--- a/media/libmediaplayerservice/MediaPlayerService.cpp
+++ b/media/libmediaplayerservice/MediaPlayerService.cpp
@@ -932,7 +932,7 @@ status_t MediaPlayerService::Client::setNextPlayer(const sp<IMediaPlayer>& playe
     ALOGV("setNextPlayer");
     Mutex::Autolock l(mLock);
     sp<Client> c = static_cast<Client*>(player.get());
-    if (!mService->hasClient(c)) {
+    if (c != NULL && !mService->hasClient(c)) {
       return BAD_VALUE;
     }
 
-- 
2.7.4

